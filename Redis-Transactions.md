# redis transactions(redis äº‹åŠ¡)

## äº‹åŠ¡ä»‹ç»
- redis äº‹åŠ¡æ˜¯é€šè¿‡ `MULTI`, `EXEC`, `DISCARD`, `WATCH` è¿™å››ä¸ªå‘½ä»¤æ¥å®Œæˆ
- redis çš„å•ä¸ªå‘½ä»¤éƒ½æ˜¯`åŸå­æ€§`çš„ï¼Œæ‰€ä»¥è¿™é‡Œç¡®ä¿äº‹åŠ¡æ€§çš„å¯¹è±¡æ˜¯`å‘½ä»¤é›†åˆ`ã€‚
- redis å°†å‘½ä»¤é›†åˆåºåˆ—åŒ–å¹¶ç¡®ä¿å¤„äºä¸€äº‹åŠ¡çš„`å‘½ä»¤é›†åˆè¿ç»­ä¸”ä¸è¢«æ‰“æ–­`çš„æ‰§è¡Œã€‚
- redis `ä¸æ”¯æŒå›æ»š`æ“ä½œã€‚

## ç›¸å…³å‘½ä»¤
- MULTI

    `ç”¨äºæ ‡è®°äº‹åŠ¡å—çš„å¼€å§‹`ã€‚
    redis ä¼šå°†åç»­çš„å‘½ä»¤é€ä¸ªæ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶åä½¿ç”¨ `EXEC`å‘½ä»¤åŸå­åŒ–çš„æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åºåˆ—ã€‚
    è¯­æ³•ï¼š`MULTI`

- EXEC

    åœ¨ä¸€ä¸ª`äº‹åŠ¡ä¸­æ‰§è¡Œæ‰€æœ‰å…ˆå‰æ”¾å…¥é˜Ÿåˆ—çš„å‘½ä»¤`ï¼Œç„¶åæ¢å¤æ­£å¸¸çš„è¿æ¥çŠ¶æ€ã€‚
    è¯­æ³•ï¼š`EXEC`

- DISCARD

    æ¸…é™¤æ‰€æœ‰å…ˆå‰åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ”¾å…¥é˜Ÿåˆ—çš„å‘½ä»¤ï¼Œç„¶åæ¢å¤æ­£å¸¸çš„è¿æ¥çŠ¶æ€ã€‚
    è¯­æ³•ï¼š`DISCARD`

- WATCH

    å½“`äº‹åŠ¡éœ€è¦æŒ‰æ¡ä»¶æ‰§è¡Œ`æ—¶ï¼Œå°±è¦ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å°†ç»™å®šçš„`é”®( key )è®¾ç½®ä¸ºå—ç›‘æ§`çš„`çŠ¶æ€`ã€‚
    è¯­æ³•ï¼š`WATCH key [â€¦]`

ä¸‹é¢è¿™æ®µä»£ç æ¥æºäº [rediså®˜ç½‘](https://redis.io/topics/transactions),ğŸ‘ˆæ›´å¤šä»£ç ä¹Ÿè¯·ç‚¹å‡»å·¦ä¾§é“¾æ¥æŸ¥é˜…

```
> MULTI
OK
> INCR foo
QUEUED
> INCR bar
QUEUED
> EXEC
1) (integer) 1
2) (integer) 1

```
